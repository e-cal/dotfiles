#!/bin/bash

rofi_command="rofi -no-fixed-num-lines -theme $HOME/.config/polybar/themes/powermenu.rasi"

if [[ $(hostname) = "coeus" ]]; then
	rofi_command+=" -m DP-0"
fi

# Options
shutdown="󰐥"
reboot="󰜉"
suspend="󰒲"
logout="󰿅"

# Variable passed to rofi
options="$shutdown\n$reboot\n$suspend\n$logout"
sel="$(echo -e "$options" | $rofi_command -dmenu)"

case $sel in
$shutdown)
	dunstify "Shutting down..."
	cloud umount all
	sleep 1
	sudo poweroff
	;;
$reboot)
	dunstify "Rebooting..."
	cloud umount all
	sleep 1
	sudo reboot
	;;
$suspend)
	sleep 0.5
	systemctl suspend
	;;
$logout)
	session=$(loginctl session-status | head -n 1 | awk '{print $1}')
	dunstify "Returning to tty..."
	sleep 1
	loginctl terminate-session $session
	;;
esac
